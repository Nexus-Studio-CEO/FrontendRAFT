<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FrontendRAFT - Build and deploy decentralized APIs directly from your browser">
    <title>FrontendRAFT - Reactive API Platform</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Fira Code', 'monospace'],
                    },
                    colors: {
                        primary: { DEFAULT: '#6366f1', hover: '#4f46e5' },
                        secondary: { DEFAULT: '#8b5cf6', hover: '#7c3aed' },
                        success: '#10b981',
                        warning: '#f59e0b',
                        error: '#ef4444',
                        surface: '#1e293b',
                        background: '#0f172a',
                        text: '#f1f5f9'
                    }
                }
            }
        }
    </script>
    
    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <style>
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="bg-background text-text antialiased min-h-screen flex overflow-hidden">

    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 bg-surface border-r border-slate-700 flex flex-col fixed md:relative z-40 h-full transition-transform transform -translate-x-full md:translate-x-0">
        <div class="px-6 py-4 mb-4 flex items-center gap-2 border-b border-slate-700">
            <i class="ph-fill ph-lightning text-primary text-2xl"></i>
            <h1 class="font-bold text-lg tracking-tight">FrontendRAFT</h1>
        </div>

        <nav class="flex-1 px-4 space-y-1 overflow-y-auto">
            <div class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 px-2">Platform</div>
            <a href="#" class="flex items-center gap-3 px-3 py-2 bg-slate-700/50 text-primary rounded-md text-sm font-medium border-l-2 border-primary">
                <i class="ph ph-squares-four text-lg"></i>
                My APIs
            </a>
        </nav>

        <div class="p-4 border-t border-slate-700">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-primary to-secondary flex items-center justify-center font-bold text-xs">U</div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium truncate">User</p>
                    <p class="text-xs text-slate-500 truncate">Free Plan</p>
                </div>
            </div>
        </div>
    </aside>

    <div id="sidebar-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-30 hidden md:hidden"></div>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col min-w-0 overflow-hidden relative">
        
        <header class="h-14 border-b border-slate-700 bg-background/95 backdrop-blur flex items-center justify-between px-4 sticky top-0 z-20">
            <div class="flex items-center gap-4">
                <button onclick="toggleSidebar()" class="md:hidden text-slate-400 hover:text-white">
                    <i class="ph text-2xl ph-list"></i>
                </button>
                <h2 class="text-sm font-semibold text-slate-200">Quick Start</h2>
            </div>
            
            <div class="flex items-center gap-3">
                <div id="status-indicator" class="hidden sm:flex items-center gap-2 text-xs text-slate-500 bg-surface px-2 py-1 rounded border border-slate-700">
                    <span class="w-2 h-2 rounded-full bg-success animate-pulse"></span>
                    <span id="status-text">Ready</span>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <div class="flex-1 overflow-y-auto p-4 sm:p-6 pb-24">
            <div class="max-w-5xl mx-auto space-y-6">
                
                <!-- Welcome Section -->
                <section class="bg-surface rounded-xl border border-slate-700 p-6 shadow-sm">
                    <div class="flex items-start gap-4">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center flex-shrink-0">
                            <i class="ph-fill ph-lightning text-2xl text-white"></i>
                        </div>
                        <div class="flex-1">
                            <h2 class="text-xl font-bold text-white mb-2">Welcome to FrontendRAFT!</h2>
                            <p class="text-slate-400 text-sm mb-4">Build and deploy decentralized APIs directly from your browser. Zero infrastructure, zero cost.</p>
                            <button onclick="initializeApp()" id="init-btn" class="px-4 py-2 rounded-lg bg-primary hover:bg-primary-hover text-white text-sm font-medium transition">
                                <i class="ph-bold ph-rocket mr-2"></i>Initialize Platform
                            </button>
                        </div>
                    </div>
                </section>

                <!-- System Logs -->
                <section class="bg-surface rounded-xl border border-slate-700 overflow-hidden shadow-sm">
                    <div class="p-4 border-b border-slate-700 bg-slate-800/50 flex justify-between items-center">
                        <h2 class="text-sm font-semibold text-slate-200 uppercase tracking-wider flex items-center gap-2">
                            <i class="ph-duotone ph-terminal"></i> System Logs
                        </h2>
                        <button onclick="clearLogs()" class="text-xs text-slate-400 hover:text-white transition">Clear</button>
                    </div>
                    <div id="logs-container" class="p-4 font-mono text-xs space-y-1 max-h-96 overflow-y-auto bg-black"></div>
                </section>
            </div>
        </div>
    </main>

    <!-- All JavaScript Inline -->
    <script>
    // ============================================
    // LOGGER (Priority #1)
    // ============================================
    class Logger {
        constructor() {
            this.logs = [];
            this.maxLogs = 500;
            this.listeners = new Set();
            this.levels = {
                DEBUG: { color: 'text-slate-400', icon: 'ðŸ›' },
                INFO: { color: 'text-blue-400', icon: 'â„¹ï¸' },
                WARN: { color: 'text-yellow-400', icon: 'âš ï¸' },
                ERROR: { color: 'text-red-400', icon: 'âŒ' },
                SUCCESS: { color: 'text-green-400', icon: 'âœ…' }
            };
        }
        
        _log(level, message, data = null) {
            const entry = {
                id: Date.now() + Math.random(),
                level,
                message,
                data,
                timestamp: new Date().toISOString(),
                time: new Date().toLocaleTimeString()
            };
            
            this.logs.push(entry);
            if (this.logs.length > this.maxLogs) this.logs.shift();
            
            this.listeners.forEach(listener => {
                try { listener(entry); } catch (e) { console.error(e); }
            });
            
            const consoleFn = level === 'ERROR' ? console.error : level === 'WARN' ? console.warn : console.log;
            consoleFn(`[${entry.time}] [${level}] ${message}`, data || '');
            
            this._updateUI(entry);
        }
        
        debug(msg, data) { this._log('DEBUG', msg, data); }
        info(msg, data) { this._log('INFO', msg, data); }
        warn(msg, data) { this._log('WARN', msg, data); }
        error(msg, data) { this._log('ERROR', msg, data); }
        success(msg, data) { this._log('SUCCESS', msg, data); }
        
        _updateUI(newEntry = null) {
            const container = document.getElementById('logs-container');
            if (!container) return;
            
            if (newEntry) {
                const logElement = this._createLogElement(newEntry);
                container.appendChild(logElement);
                container.scrollTop = container.scrollHeight;
                
                while (container.children.length > 100) {
                    container.removeChild(container.firstChild);
                }
            }
        }
        
        _createLogElement(log) {
            const div = document.createElement('div');
            div.className = 'flex gap-2 text-xs hover:bg-slate-800/50 p-1 rounded';
            const levelConfig = this.levels[log.level] || this.levels.INFO;
            
            const escapeHtml = (text) => {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            };
            
            div.innerHTML = `
                <span class="text-slate-600 w-16 shrink-0">${log.time}</span>
                <span class="w-4 shrink-0">${levelConfig.icon}</span>
                <span class="${levelConfig.color} w-16 shrink-0">${log.level}</span>
                <span class="text-slate-300 flex-1">${escapeHtml(log.message)}</span>
            `;
            return div;
        }
        
        clear() {
            this.logs = [];
            const container = document.getElementById('logs-container');
            if (container) container.innerHTML = '';
        }
    }
    
    window.Logger = new Logger();
    
    // ============================================
    // SIMPLE STORAGE (Minimal IndexedDB wrapper)
    // ============================================
    class SimpleStorage {
        constructor() {
            this.db = null;
            this.dbName = 'FrontendRAFT';
            this.storeName = 'data';
        }
        
        async init() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open(this.dbName, 1);
                
                request.onerror = () => {
                    Logger.error('Storage: Failed to open database');
                    reject(request.error);
                };
                
                request.onsuccess = () => {
                    this.db = request.result;
                    Logger.success('Storage: Database initialized');
                    resolve();
                };
                
                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    if (!db.objectStoreNames.contains(this.storeName)) {
                        db.createObjectStore(this.storeName);
                    }
                };
            });
        }
        
        async set(key, value) {
            if (!this.db) await this.init();
            
            return new Promise((resolve, reject) => {
                const transaction = this.db.transaction([this.storeName], 'readwrite');
                const store = transaction.objectStore(this.storeName);
                const request = store.put(value, key);
                
                request.onsuccess = () => resolve();
                request.onerror = () => reject(request.error);
            });
        }
        
        async get(key) {
            if (!this.db) await this.init();
            
            return new Promise((resolve, reject) => {
                const transaction = this.db.transaction([this.storeName], 'readonly');
                const store = transaction.objectStore(this.storeName);
                const request = store.get(key);
                
                request.onsuccess = () => resolve(request.result);
                request.onerror = () => reject(request.error);
            });
        }
    }
    
    window.Storage = new SimpleStorage();
    
    // ============================================
    // UI FUNCTIONS
    // ============================================
    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('-translate-x-full');
        document.getElementById('sidebar-overlay').classList.toggle('hidden');
    }
    
    function setStatus(text, success = true) {
        const statusText = document.getElementById('status-text');
        const indicator = document.getElementById('status-indicator');
        if (statusText) statusText.textContent = text;
        if (indicator) {
            indicator.querySelector('.animate-pulse').className = 
                success ? 'w-2 h-2 rounded-full bg-success animate-pulse' : 
                         'w-2 h-2 rounded-full bg-error animate-pulse';
        }
    }
    
    function clearLogs() {
        Logger.clear();
        Logger.info('Logs cleared');
    }
    
    // ============================================
    // INITIALIZATION
    // ============================================
    async function initializeApp() {
        const btn = document.getElementById('init-btn');
        btn.disabled = true;
        btn.innerHTML = '<i class="ph-bold ph-spinner animate-spin mr-2"></i>Initializing...';
        
        try {
            Logger.info('ðŸš€ FrontendRAFT v0.1.0');
            Logger.info('Based on CSOP: https://github.com/Nexus-Studio-CEO/CSOP');
            
            await new Promise(resolve => setTimeout(resolve, 500));
            Logger.success('âœ… Logger initialized');
            
            await Storage.init();
            Logger.success('âœ… Storage initialized');
            
            await new Promise(resolve => setTimeout(resolve, 300));
            Logger.success('âœ… Core components loaded');
            
            Logger.success('ðŸŽ‰ Platform ready!');
            Logger.info('You can now build APIs using FrontendRAFT');
            
            setStatus('Platform Ready', true);
            
            btn.innerHTML = '<i class="ph-bold ph-check mr-2"></i>Initialized';
            btn.className = 'px-4 py-2 rounded-lg bg-success text-white text-sm font-medium';
            
        } catch (error) {
            Logger.error('Initialization failed: ' + error.message);
            setStatus('Initialization Failed', false);
            
            btn.disabled = false;
            btn.innerHTML = '<i class="ph-bold ph-warning mr-2"></i>Retry Initialization';
            btn.className = 'px-4 py-2 rounded-lg bg-error hover:bg-red-500 text-white text-sm font-medium transition';
        }
    }
    
    // ============================================
    // AUTO-START
    // ============================================
    window.addEventListener('DOMContentLoaded', () => {
        Logger.info('DOM loaded');
        Logger.info('Click "Initialize Platform" to start');
        setStatus('Not Initialized', false);
    });
    </script>
</body>
</html>